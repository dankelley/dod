<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get Index of Canadian Meteorological Stations — dod.met.index • dod</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get Index of Canadian Meteorological Stations — dod.met.index"><meta name="description" content="Look up information on a Canadian meteorological station, by
a fuzzy search on information stored on a gc.ca website. The main
use is to find a station ID, to be used with dod.met()."><meta property="og:description" content="Look up information on a Canadian meteorological station, by
a fuzzy search on information stored on a gc.ca website. The main
use is to find a station ID, to be used with dod.met()."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dod</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.20</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/buoy.html">Downloading buoy Data</a></li>
    <li><a class="dropdown-item" href="../articles/ctd.html">Downloading ctd Data</a></li>
    <li><a class="dropdown-item" href="../articles/dod_package.html">Package Overview</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dankelley/dod/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get Index of Canadian Meteorological Stations</h1>
      <small class="dont-index">Source: <a href="https://github.com/dankelley/dod/blob/HEAD/R/met.R" class="external-link"><code>R/met.R</code></a></small>
      <div class="d-none name"><code>dod.met.index.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Look up information on a Canadian meteorological station, by
a fuzzy search on information stored on a gc.ca website. The main
use is to find a station ID, to be used with <code><a href="dod.met.html">dod.met()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dod.met.index</span><span class="op">(</span></span>
<span>  <span class="va">name</span>,</span>
<span>  max.distance <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  url <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"https://collaboration.cmc.ec.gc.ca/cmc/climate/"</span>,</span>
<span>    <span class="st">"Get_More_Data_Plus_de_donnees/Station%20Inventory%20EN.csv"</span><span class="op">)</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  debug <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>character value use in a name search. The search is
done using <code><a href="https://rdrr.io/r/base/agrep.html" class="external-link">agrep()</a></code> with the supplied <code>max.distance</code> value
and with <code>ignore.case</code> set to TRUE.</p></dd>


<dt id="arg-max-distance">max.distance<a class="anchor" aria-label="anchor" href="#arg-max-distance"></a></dt>
<dd><p>numerical value passed to <code><a href="https://rdrr.io/r/base/agrep.html" class="external-link">agrep()</a></code> in
the station-name search.</p></dd>


<dt id="arg-url">url<a class="anchor" aria-label="anchor" href="#arg-url"></a></dt>
<dd><p>the URL of the source file.  The default value has
changed over time, owing to changes with the Government of Canada
website. For example, from 2024-05-06, the link at Reference 1 worked. However,
the author noticed on 2025-07-23 that this URL did not provide
files that held a "Climate ID" column, and so the default was changed
to Reference 2 on that date. Users are asked to post an issue
on the <code>github.com/dankelley/dod/issues</code> website, if they find
that <code>dod.met.index()</code> either reports errors, or if the data
frame returned by this function lacks a column labelled <code>Climate ID</code>,
since values in that column are what is needed as the <code>id</code> parameter
by <code><a href="dod.met.html">dod.met()</a></code>.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>a logical value, passed to <code><a href="https://jeroen.r-universe.dev/curl/reference/curl_download.html" class="external-link">curl::curl_download()</a></code>, which does
the downloading.  If this is TRUE (the default), then the work is done
quietly. Until version version 0.1.12, this parameter was called <code>silent</code>,
but it was renamed to match the corresponding argument in
<code><a href="https://jeroen.r-universe.dev/curl/reference/curl_download.html" class="external-link">curl::curl_download()</a></code>, which may be more familiar to users.</p></dd>


<dt id="arg-debug">debug<a class="anchor" aria-label="anchor" href="#arg-debug"></a></dt>
<dd><p>an integer value indicating the level of debugging. If
this exceeds 0, then some debugging messages will be printed. This
value is passed down to related functions, but with 1 subtracted
for each pass.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The source file is at the web location named by the <code>url</code>
parameter. (Please contact the author, if the default value fails.
It was known to work in May of 2024, but this agency might change
the file location or format at any time.) The results are a data
frame with information that ought to be easy to interpret.  For use
with <code><a href="dod.met.html">dod.met()</a></code>, the ID field that is of use is named
<code>"Climate.ID"</code>.  See “Examples” for what might be of
interest for hourly data.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ol><li><p>Default <code>url</code> from 2024-05-06 to 2025-07-23:
<code>https://dd.weather.gc.ca/climate/observations/climate_station_list.csv</code>.</p></li>
<li><p>Default <code>url</code> from 2025-07-23 onward:
paste0("https://collaboration.cmc.ec.gc.ca/cmc/climate/",
"Get_More_Data_Plus_de_donnees/Station%20Inventory%20EN.csv).</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Dan Kelley</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span> <span class="co"># pkgdown::build_site() cannot handle downloads</span></span></span>
<span class="r-in"><span>    <span class="co"># Get index of meteorological data for Halifax, N.S.</span></span></span>
<span class="r-in"><span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dankelley.github.io/dod/">dod</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">i</span> <span class="op">&lt;-</span> <span class="fu">dod.met.index</span><span class="op">(</span><span class="st">"halifax"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="co"># see what's in these files</span></span></span>
<span class="r-in"><span>    <span class="va">i</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Province"</span>, <span class="st">"Name"</span>, <span class="st">"Climate.ID"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span>    <span class="co"># focus on the ones in Nova Scotia</span></span></span>
<span class="r-in"><span>    <span class="va">i</span> <span class="op">&lt;-</span> <span class="va">i</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"nova scotia"</span>, <span class="va">i</span><span class="op">$</span><span class="va">Province</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="op">]</span></span></span>
<span class="r-in"><span>    <span class="co"># Show start/end times for hourly data.</span></span></span>
<span class="r-in"><span>    <span class="va">i</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Name"</span>, <span class="st">"Station.ID"</span>, <span class="st">"HLY.First.Year"</span>, <span class="st">"HLY.Last.Year"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span>    <span class="co">#&gt;                           Name Station.ID HLY.First.Year HLY.Last.Year</span></span></span>
<span class="r-in"><span>    <span class="co">#&gt; 8196                   HALIFAX       6355             NA            NA</span></span></span>
<span class="r-in"><span>    <span class="co">#&gt; 8197                   HALIFAX       6356           1953          1963</span></span></span>
<span class="r-in"><span>    <span class="co">#&gt; 8198           HALIFAX CITADEL       6357             NA            NA</span></span></span>
<span class="r-in"><span>    <span class="co">#&gt; 8199           HALIFAX COMMONS      49128           2010          2011</span></span></span>
<span class="r-in"><span>    <span class="co">#&gt; 8200          HALIFAX DOCKYARD      43405           2004          2025</span></span></span>
<span class="r-in"><span>    <span class="co">#&gt; 8201 HALIFAX STANFIELD INT\'L A      53938           2019          2025</span></span></span>
<span class="r-in"><span>    <span class="co">#&gt; 8202 HALIFAX STANFIELD INT\'L A       6358           1961          2012</span></span></span>
<span class="r-in"><span>    <span class="co">#&gt; 8203 HALIFAX STANFIELD INT\'L A      50620           2012          2025</span></span></span>
<span class="r-in"><span>    <span class="co">#&gt; 8204          HALIFAX KOOTENAY      43124           2004          2025</span></span></span>
<span class="r-in"><span>    <span class="co">#&gt; 8205      HALIFAX WINDSOR PARK      43403           2004          2025</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dan Kelley, Annie Howard, Jaimie Harbin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

