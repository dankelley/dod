<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Download CTD data from the Bedford Basin Mooring Project — dod.ctd.bbmp • dod</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Download CTD data from the Bedford Basin Mooring Project — dod.ctd.bbmp"><meta name="description" content="dod.ctd.bbmp can retrieve both index files and data files
from the Bedford Basin Mooring Project (BBMP). Since the naming
convention of the data files may alter from year to year, it is
important to start by downloading an index first, to ascertain
the name of a file of interest; see &amp;#8216;Examples&amp;#8217;."><meta property="og:description" content="dod.ctd.bbmp can retrieve both index files and data files
from the Bedford Basin Mooring Project (BBMP). Since the naming
convention of the data files may alter from year to year, it is
important to start by downloading an index first, to ascertain
the name of a file of interest; see &amp;#8216;Examples&amp;#8217;."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dod</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.15</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/buoy.html">Downloading buoy Data</a></li>
    <li><a class="dropdown-item" href="../articles/ctd.html">Downloading ctd Data</a></li>
    <li><a class="dropdown-item" href="../articles/dod_package.html">Package Overview</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dankelley/dod/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Download CTD data from the Bedford Basin Mooring Project</h1>
      <small class="dont-index">Source: <a href="https://github.com/dankelley/dod/blob/HEAD/R/ctd_bbmp.R" class="external-link"><code>R/ctd_bbmp.R</code></a></small>
      <div class="d-none name"><code>dod.ctd.bbmp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>dod.ctd.bbmp can retrieve both index files and data files
from the Bedford Basin Mooring Project (BBMP). Since the naming
convention of the data files may alter from year to year, it is
important to start by downloading an index first, to ascertain
the name of a file of interest; see ‘Examples’.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dod.ctd.bbmp</span><span class="op">(</span></span>
<span>  <span class="va">year</span>,</span>
<span>  index <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ID <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  direction <span class="op">=</span> <span class="st">"DN"</span>,</span>
<span>  file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  destdir <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  age <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  debug <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-year">year<a class="anchor" aria-label="anchor" href="#arg-year"></a></dt>
<dd><p>a numeric or character value specifying the year of interest.
If this is not provided, it defaults to the current year.</p></dd>


<dt id="arg-index">index<a class="anchor" aria-label="anchor" href="#arg-index"></a></dt>
<dd><p>logical value indicating whether to download an index,
rather than a file.  See Examples.</p></dd>


<dt id="arg-id">ID<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>an integer value giving the sequence number of the CTD
cast in the given year.</p></dd>


<dt id="arg-direction">direction<a class="anchor" aria-label="anchor" href="#arg-direction"></a></dt>
<dd><p>a character value indicating the direction
of the cast, either <code>"DN"</code> (the default) or <code>"UP"</code>.</p></dd>


<dt id="arg-file">file<a class="anchor" aria-label="anchor" href="#arg-file"></a></dt>
<dd><p>character value giving the name to be used for
the downloaded file.  If this is NULL (which is the default) then
the filename is as on the remote data server.</p></dd>


<dt id="arg-destdir">destdir<a class="anchor" aria-label="anchor" href="#arg-destdir"></a></dt>
<dd><p>a character value indicating the directory
in which to store downloaded files.</p></dd>


<dt id="arg-age">age<a class="anchor" aria-label="anchor" href="#arg-age"></a></dt>
<dd><p>a numerical value indicating a time interval, in days.
If the file to be downloaded from the server already exists
locally, and was created less than <code>age</code> days in the past, it will
not be downloaded again.  Setting <code>age=0</code> forces a download, so
that existing files will always be updated. By contrast, setting
<code>age</code> to a negative number prevents the updating of files that
already exist locally, regardless of their age.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>a logical value, passed to <code><a href="https://jeroen.r-universe.dev/curl/reference/curl_download.html" class="external-link">curl::curl_download()</a></code>, which does
the downloading.  If this is TRUE (the default), then the work is done
quietly. Until version version 0.1.12, this parameter was called <code>silent</code>,
but it was renamed to match the corresponding argument in
<code><a href="https://jeroen.r-universe.dev/curl/reference/curl_download.html" class="external-link">curl::curl_download()</a></code>, which may be more familiar to users.</p></dd>


<dt id="arg-debug">debug<a class="anchor" aria-label="anchor" href="#arg-debug"></a></dt>
<dd><p>an integer value indicating the level of debugging. If
this exceeds 0, then some debugging messages will be printed. This
value is passed down to related functions, but with 1 subtracted
for each pass.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>dod.ctd.bbmp returns one of two things: (a) if <code>index</code> is TRUE, it
returns a data frame with columns named <code>year</code>, <code>id</code> and <code>direction</code> or (b)
a character value naming the file that was retrieved. See the
‘Examples’ section for an example of a typical workflow.</p>
    </div>
    <div class="section level2">
    <h2 id="historical-note">Historical Note<a class="anchor" aria-label="anchor" href="#historical-note"></a></h2>



<p>Sometime in prior to April 2025, the DFO server and the format
of the data files both changed, and this necessitated changes
to <code>dod.ctd.bbmp()</code>. Note that the server no longer
supplies index files, so the present code tries to discover
information by scraping the website ... making it very sensitive
to changes and thus brittle.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other functions that download files:
<code><a href="dod.amsr.html">dod.amsr</a>()</code>,
<code><a href="dod.buoy.html">dod.buoy</a>()</code>,
<code><a href="dod.coastline.html">dod.coastline</a>()</code>,
<code><a href="dod.ctd.html">dod.ctd</a>()</code>,
<code><a href="dod.ctd.bats.html">dod.ctd.bats</a>()</code>,
<code><a href="dod.ctd.gtspp.html">dod.ctd.gtspp</a>()</code>,
<code><a href="dod.ctd.itp.html">dod.ctd.itp</a>()</code>,
<code><a href="dod.met.html">dod.met</a>()</code>,
<code><a href="dod.tideGauge.html">dod.tideGauge</a>()</code>,
<code><a href="dod.topo.html">dod.topo</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Dan Kelley</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Download and study first BBMP CTD file of year 2024</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span> <span class="co"># sidestep a pkgdown::build_site() error</span></span></span>
<span class="r-in"><span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dankelley.github.io/dod/">dod</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co"># Note: cannot specify year=2025 because the URL is differently constructed</span></span></span>
<span class="r-in"><span>    <span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="dod.ctd.html">dod.ctd</a></span><span class="op">(</span><span class="st">"BBMP"</span>, year <span class="op">=</span> <span class="st">"2024"</span>, index <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">destdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># get temporary storage</span></span></span>
<span class="r-in"><span>    <span class="va">ctdFile</span> <span class="op">&lt;-</span> <span class="fu"><a href="dod.ctd.html">dod.ctd</a></span><span class="op">(</span><span class="st">"BBMP"</span>, year <span class="op">=</span> <span class="va">index</span><span class="op">$</span><span class="va">year</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, ID <span class="op">=</span> <span class="va">index</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, destdir <span class="op">=</span> <span class="va">destdir</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co"># Use oce to read, summarize and plot the data.</span></span></span>
<span class="r-in"><span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dankelley.github.io/oce/" class="external-link">oce</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">ctd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dankelley.github.io/oce/reference/read.netcdf.html" class="external-link">read.netcdf</a></span><span class="op">(</span><span class="va">ctdFile</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://dankelley.github.io/oce/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://dankelley.github.io/oce/reference/as.ctd.html" class="external-link">as.ctd</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ctd</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ctd</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">destdir</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># clean up temporary storage</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dan Kelley, Annie Howard, Jaimie Harbin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

