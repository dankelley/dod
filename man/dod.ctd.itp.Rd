% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ctd_itp.R
\name{dod.ctd.itp}
\alias{dod.ctd.itp}
\title{Download CTD data from the Ice-Tethered Profiler program}
\usage{
dod.ctd.itp(
  ID,
  info = FALSE,
  url,
  file = NULL,
  destdir = ".",
  age = 0,
  quiet = FALSE,
  debug = 0
)
}
\arguments{
\item{ID}{an integer specifying the ID of the profiler that is of interest.}

\item{info}{a logical value.  If \code{info} is FALSE, which is the default, then
\code{\link[=dod.ctd.itp]{dod.ctd.itp()}} downloads the zip-format file that can be expanded into
a directory that holds a data file for each profile made by the
profiler with the given \code{ID}.  The name of the zip file is returned.
(This file must be unzipped to access the data; \code{\link[=unzip]{unzip()}} is a convenient
way to do this.)
On the other hand, if \code{info} is TRUE, then
nothing is downloaded, and \code{\link[=dod.ctd.itp]{dod.ctd.itp()}} returns a
URL holding information about the profiler.}

\item{url}{optional character value supplying the full URL for the sought-after
file.  If this is supplied, then both \code{ID} and \code{info} are ignored.  See
\dQuote{Historical notes} to learn more about this parameter.}

\item{file}{character value giving the name to be used for the downloaded
file.  If \code{file} is NULL, which is the default, then the filename on the
server is used.}

\item{destdir}{a character value indicating the directory
in which to store downloaded files.}

\item{age}{a numerical value indicating a time interval, in days.
If the file to be downloaded from the server already exists
locally, and was created less than \code{age} days in the past, it will
not be downloaded again.  Setting \code{age=0} forces a download, so
that existing files will always be updated. By contrast, setting
\code{age} to a negative number prevents the updating of files that
already exist locally, regardless of their age.}

\item{quiet}{a logical value, passed to \code{\link[curl:curl_download]{curl::curl_download()}}, which does
the downloading.  If this is TRUE (the default), then the work is done
quietly. Until version version 0.1.12, this parameter was called \code{silent},
but it was renamed to match the corresponding argument in
\code{\link[curl:curl_download]{curl::curl_download()}}, which may be more familiar to users.}

\item{debug}{an integer value indicating the level of debugging. If
this exceeds 0, then some debugging messages will be printed. This
value is passed down to related functions, but with 1 subtracted
for each pass.}
}
\value{
\code{\link[=dod.ctd.itp]{dod.ctd.itp()}} returns the full pathname of the
downloaded zip file, or a URL of an information site,
depending on the value of \code{info}.
}
\description{
\code{\link[=dod.ctd.itp]{dod.ctd.itp()}} downloads CTD data from the Woods Hole Oceanographic
Institutions Ice-Thethered Profile program
\url{https://www2.whoi.edu/site/itp/}.  Note that this
server does not provide a searchable index, so users will need to visit the website
\url{https://www2.whoi.edu/site/itp/data/} to determine IDs of interest. Please
take note of the \sQuote{Historical update} section, regarding whether to
supply \code{ID} (with or without \code{info}) or to supply \code{url}.
}
\section{Historical notes}{

\itemize{
\item 2025-08-19. The \code{url} parameter was added, when it was discovered that the
organizational structure of the remote-server directories had changed
compared with that upon which the code for \code{ID} and \code{info} was written.
It is possible that the code that handles \code{ID} and \code{info} will be updated
for the new organizational structure, but, even if it is, users
may be better-off by exploring the server website and isolating files
of interest that way. Supplying \code{url} is also advantageous because it
lets the user control what version of data are to be downloaded,
as in the \dQuote{Worked Example}.
}
}

\section{Worked Example}{


Note that the following code is not run during the package build
process, as it downloads a large file. It was last run, and the
resultant PNG created, on 2025-08-19.

\if{html}{\out{<div class="sourceCode r">}}\preformatted{library(dod)
library(oce)
url <- paste0(
    "https://scienceweb.whoi.edu/itp/data/",
    "itpsys137/itp137_level2.nc"
)
nc <- dod.ctd.itp(url = url, age = 1)
d <- oce::read.netcdf(nc)
time <- as.POSIXct("1970-01-01") + 86400 * d[["profile_info/time"]]
lat <- d[["profile_info/latitude"]]
lon <- d[["profile_info/longitude"]]
png("itp.png")
data(coastlineWorld)
par(mar = c(2, 2, 2, 1))
mapPlot(coastlineWorld,
    longitudelim = c(-180, 180), latitudelim = c(70, 90),
    projection = "+proj=stere +lat_0=90 +lat_ts=90 +lon_0=-130",
    col = "lightgray"
)
col <- cut(time, "year")
mapPoints(lon, lat, cex = 0.3, pch = 20, col = col)
mapScalebar("topleft", length = 1000)
}\if{html}{\out{</div>}}

\if{html}{\figure{itp.png}{options: width="400" alt="Figure: itp.png"}}
}

\seealso{
Other functions that download files: 
\code{\link{dod.amsr}()},
\code{\link{dod.buoy}()},
\code{\link{dod.coastline}()},
\code{\link{dod.ctd}()},
\code{\link{dod.ctd.bats}()},
\code{\link{dod.ctd.bbmp}()},
\code{\link{dod.ctd.gtspp}()},
\code{\link{dod.met}()},
\code{\link{dod.tideGauge}()},
\code{\link{dod.topo}()}
}
\author{
Dan Kelley
}
\concept{functions that download files}
